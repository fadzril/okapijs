var okapi=(function(){var d={};d.SOURCE_OVER="source-over";d.SOURCE_IN="source-in";d.SOURCE_OUT="source-out";d.SOURCE_ATOP="source-atop";d.DESTINATION_OVER="distination-over";d.DESTINATION_IN="destination-in";d.DESTINATION_OUT="destination-out";d.DESTINATION_ATOP="destination-atop";d.LIGHTER="lighter";d.COPY="copy";d.XOR="xor";var c=function(h,f){var j=0;var g=0;this.cx=0;this.cy=0;this.x=0;this.y=0;this.rotation=0;this.scaleX=1;this.scaleY=1;this.shadowBlur=0;this.shadowOffsetX=0;this.shadowOffsetY=0;this.shadowColor="rgba(0, 0, 0, 0)";this.alpha=1;this.compositeOperation="source-over";this.scaleList=[];if(h instanceof Array){for(i=0;i<h.length;++i){this.scaleList[i]={canvas:h[i].canvas,scale:h[i].scale,cx:0,cy:0};j=Math.max(j,h[i].canvas.width);g=Math.max(g,h[i].canvas.height)}}else{this.scaleList[0]={canvas:h,scale:1,cx:0,cy:0};j=h.width;g=h.height}this.scaleList=this.scaleList.sort(function(l,k){return l.scale-k.scale});if(f){for(i=0;i<this.scaleList.length;++i){this.scaleList[i].cx=(j*this.scaleList[i].scale)/2;this.scaleList[i].cy=(g*this.scaleList[i].scale)/2}}};c.prototype.onBeforeDraw=function(){};c.prototype.onAfterDraw=function(){};c.prototype.draw=function(k){var j={};var g;var l;var h,f;this.onBeforeDraw();j.shadowBlur=k.shadowBlur;j.shadowOffsetX=k.shadowOffsetX;j.shadowOffsetY=k.shadowOffsetY;j.shadowColor=k.shadowColor;j.globalAlpha=k.globalAlpha;j.globalCompositeOperation=k.globalCompositeOperation;k.save();k.shadowBlur=this.shadowBlur;k.shadowOffsetX=this.shadowOffsetX;k.shadowOffsetY=this.shadowOffsetY;k.shadowColor=this.shadowColor;k.globalAlpha=this.alpha;k.globalCompositeOperation=this.compositeOperation;k.translate(this.x,this.y);k.rotate(this.rotation);l=Math.max(this.scaleX,this.scaleY);f=this.scaleList.length;h=0;while(h<f-1&&l>this.scaleList[h].scale){++h}g=this.scaleList[h];k.scale((this.scaleX/g.scale),(this.scaleY/g.scale));k.translate(-g.cx,-g.cy);k.drawImage(g.canvas,0,0);k.restore();k.shadowBlur=j.shadowBlur;k.shadowOffsetX=j.shadowOffsetX;k.shadowOffsetY=j.shadowOffsetY;k.shadowColor=j.shadowColor;k.globalAlpha=j.globalAlpha;k.globalCompositeOperation=j.globalCompositeOperation;this.onAfterDraw()};var a=function(g,f){this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",g);this.canvas.setAttribute("height",f);this.context=this.canvas.getContext("2d");this.displayList=[];this.continuous=false;this.length=0};a.prototype.draw=function(h){var f;var g;this.onBeforeDraw();if(!this.continuous){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}f=this.displayList.length;for(g=0;g<f;++g){this.displayList[g].draw(this.context)}if(h!=null){h.drawImage(this.canvas,0,0)}this.onAfterDraw()};a.prototype.addChild=function(f){++this.length;this.displayList.push(f)};a.prototype.removeChild=function(g){var f=this.displayList.indexOf(g);if(f>-1){--this.length;this.displayList.splice(f,1);return true}else{return false}};a.prototype.removeChildFromIndex=function(f){if(this.length>f&&f>-1){--this.length;this.displayList.splice(f,1);return true}else{return false}};a.prototype.removeAll=function(){while(this.removeChildFromIndex(0)){}};a.prototype.onBeforeDraw=function(){};a.prototype.onAfterDraw=function(){};var b=function(f){this.runId=-1;this.displayList=[];this.continuous=false;this.canvas=f;this.context=f.getContext("2d")};b.prototype=new a();b.prototype.start=function(f){var g=this;this.draw();clearInterval(this.runId);this.runId=setInterval(function(){g.draw.apply(g)},f)};b.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};b.prototype.stop=function(){clearInterval(this.runId)};var e={};e.CompositeOperation=d;e.Sprite=c;e.Container=a;e.Engine=b;return e}());